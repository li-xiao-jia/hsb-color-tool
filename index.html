<!-- 版权声明 -->
<!-- 
HSB色彩识别练习工具
作者：励小加 © 2025
未经许可禁止复制或商业使用
--><!DOCTYPE html><html lang="zh-CN"><head> <meta name="author" content="励小加"> <meta name="copyright" content="© 2025 励小加. 保留所有权利。"> <meta name="description" content="一个由励小加开发的HSB色彩识别练习工具（电脑版）"> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>HSB色彩识别练习工具pc</title> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> <style> * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; } body { background: linear-gradient(135deg, #2c3e50, #1a2530); color: #ecf0f1; min-height: 100vh; padding: 20px; line-height: 1.6; display: flex; justify-content: center; align-items: center; } .container { max-width: 1100px; width: 100%; background: rgba(52, 73, 94, 0.9); border-radius: 15px; padding: 25px; box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4); } header { text-align: center; margin-bottom: 25px; } h1 { font-size: 2.5rem; color: #3498db; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); } .description { color: #bdc3c7; font-size: 1.1rem; max-width: 700px; margin: 0 auto; } .main-content { display: flex; gap: 25px; flex-wrap: wrap; } .left-panel, .right-panel { flex: 1; min-width: 300px; } .panel { background: rgba(0, 0, 0, 0.2); border-radius: 10px; padding: 20px; margin-bottom: 10px; } .panel-title { font-size: 1.3rem; color: #3498db; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid #3498db; } .color-display-container { background: #808080; padding: 50px; border-radius: 10px; margin-bottom: 20px; position: relative; } .color-display { width: 100%; height: 140px; border-radius: 10px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; } .color-info { text-align: center; margin: 20px 0; padding: 15px; background: rgba(0, 0, 0, 0.3); border-radius: 10px; min-height: 66px; display: flex; flex-direction: column; justify-content: center; } #colorPrompt { margin: 10px 0; } .color-value { font-family: monospace; font-size: 1.4rem; font-weight: bold; margin: 10px 0; padding: 10px; background: rgba(0, 0, 0, 0.5); border-radius: 8px; display: none; } .color-value.show { display: block; } .controls { margin-bottom: 8px; } .control-group { margin-bottom: 6px; } .control-group h3 { margin-bottom: 12px; display: flex; align-items: center; color: #3498db; } .control-group h3 i { margin-right: 10px; } .slider-container { margin-bottom: 8px; } .slider-container label { display: block; margin-bottom: 4px; font-weight: 500; display: flex; justify-content: space-between; } .slider-wrapper { display: flex; align-items: center; gap: 8px; } input[type="range"] { flex: 1; height: 8px; -webkit-appearance: none; border-radius: 4px; outline: none; background: #7f8c8d; } input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%; cursor: pointer; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3); } #hueMin, #hueMax, #hueSlider { background: linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000); } #hueMin::-webkit-slider-thumb, #hueMax::-webkit-slider-thumb, #hueSlider::-webkit-slider-thumb { background: #fff; border: 2px solid #000; } #saturationMin, #saturationMax, #saturationSlider { background: linear-gradient(to right, #888, #f00); } #saturationMin::-webkit-slider-thumb, #saturationMax::-webkit-slider-thumb, #saturationSlider::-webkit-slider-thumb { background: #e74c3c; } #brightnessMin, #brightnessMax, #brightnessSlider { background: linear-gradient(to right, #000, #fff); } #brightnessMin::-webkit-slider-thumb, #brightnessMax::-webkit-slider-thumb, #brightnessSlider::-webkit-slider-thumb { background: #7f8c8d; } .slider-value { width: 50px; text-align: center; font-family: monospace; font-weight: bold; background: rgba(0, 0, 0, 1); padding: 5px; border-radius: 5px; } .number-input { width: 60px; text-align: center; font-family: monospace; font-weight: bold; background: rgba(0, 0, 0, 0.3); color: #ecf0f1; border: 1px solid #3498db; border-radius: 5px; padding: 5px; } .slider-wrapper { display: flex; align-items: center; gap: 6px; } .buttons { display: flex; gap: 15px; margin: 5px 0; flex-wrap: wrap; } button { padding: 14px 25px; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); } button:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); } button:active { transform: translateY(0); } #generateBtn { background: #3498db; color: white; flex: 1; min-width: 180px; } #showAnswerBtn { background: #2ecc71; color: white; flex: 1; min-width: 180px; } #convertedHsbValue { font-family: monospace; font-size: 0.9rem; font-weight: bold; margin: 1px 0; padding: 0px; border-radius: 0px; color: #3498db; } #resetBtn { background: #e74c3c; color: white; flex: 1; } .color-picker-container { display: flex; flex-direction: column; gap: 15px; } .custom-color-input { display: flex; flex-direction: column; gap: 6px; } .color-picker-wrapper { display: flex; justify-content: center; gap: 15px; align-items: center; flex-wrap: wrap; } #colorPicker { width: 100px; height: 100px; border: 2px solid #000; box-shadow: inset 0 0 0 2px #ffffff; outline: none; box-shadow: 0 0 0 5px #808080; cursor: pointer; align-self: center; } .color-conversion { padding: 15px; border-radius: 8px; min-width: 200px; } .color-conversion p { margin: 8px 0; font-family: monospace; } .color-conversion span { font-weight: bold; color: #fff; } #convertedHsb { font-size: 1.1rem; padding: 5px; } .color-action-buttons { display: flex; gap: 10px; margin-top: 5px; } .color-action-buttons button { flex: 1; padding: 12px 15px; } #applyColorBtn { background: #9b59b6; color: white; } #applyColorBtn:hover { background: #8e44ad; } #applyBgColorBtn { background: #f39c12; color: white; } #applyBgColorBtn:hover { background: #e67e22; } #resetBgColorBtn { background: #7f8c8d; color: white; } #resetBgColorBtn:hover { background: #95a5a6; } #convertBtn { background: #3498db; color: white; margin-top: 10px; width: 100%; } #convertBtn:hover { background: #2980b9; } .canvas-container { width: 100%; margin-top: 15px; } .canvas-with-sidebar { display: flex; gap: 15px; width: 100%; } .canvas-sidebar-buttons { display: flex; flex-direction: column; gap: 10px; justify-content: flex-start; width: 25%; } .sidebar-btn { padding: 8px 12px !important; font-size: 0.85rem !important; min-height: 40px; display: flex; align-items: center; justify-content: center; width: 100%; } @media (max-width: 768px) { .canvas-with-sidebar { flex-direction: column; } #colorCanvas { width: 100%; } .canvas-sidebar-buttons { flex-direction: row; width: 100%; flex-wrap: wrap; } .sidebar-btn { flex: 1; min-width: 120px; } } #colorCanvas { width: 75%; height: 280px; background: #ffffff; border-radius: 8px; cursor: crosshair; touch-action: none; border: 1px solid #555; } .canvas-controls button { padding: 8px 15px; flex: 1; } .canvas-bg-buttons button { flex: 1; padding: 8px 15px; } #whiteBgBtn { background: #ffffff; color: #333; } #whiteBgBtn:hover { background: #f0f0f0; } #grayBgBtn { background: #7f8c8d; color: white; } #grayBgBtn:hover { background: #95a5a6; } .tips { background: rgba(52, 152, 219, 0.2); border-left: 4px solid #3498db; padding: 28px; border-radius: 5px; margin: 10px 0; font-size: 1rem; } .tips h3 { color: #3498db; margin-bottom: 10px; } .tips ul { padding-left: 10px; } .tips li { margin-bottom: 8px; } .footer { text-align: center; margin-top: 16px; color: #8C9B9C; font-size: 1rem; width: 100%; } .difficulty-buttons { display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap; } .difficulty-btn { flex: 1; padding: 12px; min-width: 100px; } #easyBtn { background: #2ecc71; color: white; } #mediumBtn { background: #f39c12; color: white; } #hardBtn { background: #e74c3c; color: white; } .hsb-slider-control { margin-top: 10px; padding: 15px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; } .hsb-slider { margin-bottom: 6px; } .hsb-slider label { display: flex; justify-content: space-between; margin-bottom: 5px; font-weight: 500; } .hsb-slider input[type="range"] { width: 100%; } .hsb-slider-value { width: 40px; text-align: center; font-family: monospace; background: rgba(0, 0, 0, 0.3); padding: 3px; border-radius: 4px; } .full-width-panel { width: 100%; flex-basis: 100%; } .full-width-panel .controls { display: flex; flex-wrap: wrap; gap: 20px; } .full-width-panel .control-group { flex: 1; min-width: 300px; } .full-width-panel .buttons { width: 100%; justify-content: center; } #hintBtn { background: #e74c3c; color: white; margin-top: 10px; width: 100%; display: none; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding: 12px 8px; min-height: auto; } #hintBtn.green { background: #2ecc71; } .convert-btn-container { display: flex; gap: 10px; } .quick-judge-panel { background: rgba(0, 0, 0, 0.2); border-radius: 10px; padding: 5px; margin-top: 15px; } .quiz-title { font-size: 1.1rem; color: #3498db; margin-bottom: 3px; text-align: center; } .judge-buttons { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 15px; } .judge-btn { padding: 10px 15px; border: none; border-radius: 6px; color: white; font-weight: 500; cursor: pointer; transition: all 0.3s; flex: 1; min-width: 80px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); } .judge-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); } .judge-btn:active { transform: translateY(0); } .judge-btn.correct { background-color: #2ecc71 !important; color: white !important; } .judge-btn.incorrect { background-color: #e74c3c !important; color: white !important; } .saturation-btn[data-range="0-25"] { background-color: #DEDEFF; color: #333; } .saturation-btn[data-range="26-50"] { background-color: #9E9EFF; } .saturation-btn[data-range="51-75"] { background-color: #5E5EFF; } .saturation-btn[data-range="76-100"] { background-color: #1F1FFF; } .brightness-btn[data-range="0-25"] { background-color: #404040; } .brightness-btn[data-range="26-50"] { background-color: #808080; } .brightness-btn[data-range="51-75"] { background-color: #BFBFBF; color: #333; } .brightness-btn[data-range="76-100"] { background-color: #E0E0E0; color: #333; } .hard-mode-buttons .judge-btn { background-color: #808080; color: #ffffff; } .quiz-result { margin-top: 10px; text-align: center; min-height: 24px; font-weight: 500; } .streak-counter { font-size: 0.9rem; color: #2ecc71; margin-left: 15px; font-weight: normal; background: rgba(46, 204, 113, 0.2); padding: 4px 8px; border-radius: 12px; } .foldable-content { overflow: hidden; transition: max-height 0.3s ease-out; max-height: 600px; } .foldable-content.collapsed { max-height: 0 !important; } .fold-icon { transition: transform 0.3s ease; margin-left: 0px; cursor: pointer; } .fold-icon.rotated { transform: rotate(180deg); } #quickJudgePanel { min-height: 10px; transition: min-height 0.3s ease; } #canvasPanel { min-height: 10px; transition: min-height 0.3s ease; } .bg-control-buttons { display: flex; gap: 10px; margin: 15px 0; flex-wrap: wrap; } .bg-control-btn { flex: 1; padding: 10px 15px; min-width: 80px; } #sameBgBtn { background: #3498db; color: white; } #oppositeBgBtn { background: #9b59b6; color: white; } #randomBgBtn { background: #f39c12; color: white; } #grayBgBtn2 { background: #7f8c8d; color: white; } #whiteBgBtn2 { background: #ffffff; color: #333; } #whiteBgBtn2:hover { background: #f0f0f0; } #whiteBgBtn2.active { color: #ffffff !important; } .bg-control-btn.active { background: #2ecc71 !important; box-shadow: 0 0 0 2px #fff, 0 0 0 4px #2ecc71; } .background-comparison-panel { margin-top: 5px; margin-bottom: 8px; } .comparison-container { display: flex; justify-content: space-between; gap: 20px; margin-bottom: 15px; position: relative; background: rgba(42, 42, 42, 1); padding: 15px; border-radius: 15px; } .comparison-item { display: flex; flex-direction: column; align-items: center; flex: 1; cursor: default; } .comparison-bg { width: 65%; height: 80px; border-radius: 8px; margin-bottom: 8px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; } .comparison-color { width: 20%; height: 36px; border-radius: 3px; position: relative; z-index: 2; } .color-connector { position: absolute; top: 40%; left: 0; width: 100%; height: 30px; transform: translateY(-50%); z-index: 1; display: none; } .comparison-item span { font-size: 0.9rem; color: #bdc3c7; } .comparison-controls { display: flex; gap: 10px; justify-content: center; margin-top: 10px; } .comparison-btn { padding: 8px 15px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer; transition: all 0.2s; } .hard-mode-btn { min-width: 60px; padding: 8px 10px; font-size: 0.9rem; } .hard-mode-buttons { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-bottom: 10px; } .site-footer { text-align: center; } .site-footer a { color: inherit; text-decoration: none; } @media (max-width: 768px) { .main-content { flex-direction: column; } h1 { font-size: 2rem; } .color-picker-wrapper { flex-direction: column; } .buttons { flex-direction: column; } #generateBtn, #showAnswerBtn { min-width: auto; width: 100%; } .difficulty-buttons { flex-direction: column; } .convert-btn-container { flex-direction: column; } .bg-control-buttons { flex-direction: column; } .hard-mode-buttons { grid-template-columns: repeat(2, 1fr); } } </style></head><body> <div class="container"> <header> <h1><i class="fas fa-palette"></i> HSB色彩识别练习工具</h1> <p class="description">感受颜色和HSB值的关系，练习调对方向，培养抓色自信，探索误差的影响因素</p> </header> <div class="main-content"> <div class="left-panel"> <div class="panel"> <h2 class="panel-title">颜色生成器</h2> <div class="color-display-container" id="colorDisplayContainer"> <div class="color-display" id="colorDisplay"> <span>当前颜色</span> </div> </div> <div class="bg-control-buttons"> <button id="sameBgBtn" class="bg-control-btn"> 相同 </button> <button id="oppositeBgBtn" class="bg-control-btn"> 相反 </button> <button id="randomBgBtn" class="bg-control-btn"> 随机 </button> <button id="grayBgBtn2" class="bg-control-btn"> 中灰 </button> <button id="whiteBgBtn2" class="bg-control-btn"> 白色 </button> </div> <div class="color-info"> <p id="colorPrompt">（答案）</p> <div class="color-value" id="colorValue">HSB(0, 0%, 0%)</div> <div class="color-value" id="convertedHsbValue" style="display: none;">拾色器HSB(0, 0%, 0%)</div> </div> <div class="buttons"> <button id="generateBtn"> <i class="fas fa-dice"></i> 生成随机颜色 </button> <button id="showAnswerBtn"> <i class="fas fa-eye"></i> 显示/隐藏答案 </button> </div> <div class="quick-judge-panel" id="quickJudgePanel"> <h3 class="quiz-title" id="quickJudgeToggle"> <span>HSB区间快速判断</span> <i class="fas fa-chevron-down fold-icon" style="margin-left: 10px; cursor: pointer;"></i> </h3> <div class="foldable-content" id="quickJudgeContent"> <h3 class="quiz-title">饱和度区间 <span class="streak-counter">连续答对: <span id="saturationStreak">0</span></span> </h3> <div class="judge-buttons" id="saturationButtons"> <button class="judge-btn saturation-btn" data-range="0-25">0-25%</button> <button class="judge-btn saturation-btn" data-range="26-50">26-50%</button> <button class="judge-btn saturation-btn" data-range="51-75">51-75%</button> <button class="judge-btn saturation-btn" data-range="76-100">76-100%</button> </div> <h3 class="quiz-title">明度区间 <span class="streak-counter">连续答对: <span id="brightnessStreak">0</span></span> </h3> <div class="judge-buttons" id="brightnessButtons"> <button class="judge-btn brightness-btn" data-range="0-25">0-25%</button> <button class="judge-btn brightness-btn" data-range="26-50">26-50%</button> <button class="judge-btn brightness-btn" data-range="51-75">51-75%</button> <button class="judge-btn brightness-btn" data-range="76-100">76-100%</button> </div> <div class="difficulty-buttons"> <button id="easyBtn" class="difficulty-btn"> <i class="fas fa-smile"></i> 容易 </button> <button id="mediumBtn" class="difficulty-btn"> <i class="fas fa-meh"></i> 中等 </button> <button id="hardBtn" class="difficulty-btn"> <i class="fas fa-frown"></i> 困难 </button> </div> </div> </div> </div> </div> <div class="right-panel"> <div class="panel"> <h2 class="panel-title">拾色器</h2> <div class="color-picker-container"> <div class="custom-color-input"> <div class="color-picker-wrapper"> <input type="color" id="colorPicker" value="#000000"> <div class="color-conversion"> <p>RGB: <span id="rgbValue">52, 152, 219</span></p> <p>HSB: <span id="convertedHsb">0, 0%, 0%</span></p> <div class="convert-btn-container"> <button id="convertBtn"> check </button> <button id="hintBtn"> 提示 </button> </div> </div> </div> <div class="slider-container"> <label> <span>色相 (H)</span> <span id="hueSliderValue">0</span> </label> <div class="slider-wrapper"> <input type="range" id="hueSlider" min="0" max="360" value="0" class="hsb-slider-input"> <input type="number" id="hueSliderInput" min="0" max="360" value="0" class="number-input"> </div> </div> <div class="slider-container"> <label> <span>饱和度 (S)</span> <span id="saturationSliderValue">0%</span> </label> <div class="slider-wrapper"> <input type="range" id="saturationSlider" min="0, 100" value="0" class="hsb-slider-input"> <input type="number" id="saturationSliderInput" min="0, 100" value="0" class="number-input"> </div> </div> <div class="slider-container"> <label> <span>明度 (B)</span> <span id="brightnessSliderValue">0%</span> </label> <div class="slider-wrapper"> <input type="range" id="brightnessSlider" min="0, 100" value="0" class="hsb-slider-input"> <input type="number" id="brightnessSliderInput" min="0, 100" value="0" class="number-input"> </div> </div> </div> <div class="color-action-buttons"> <button id="applyColorBtn"> 设为当前颜色 </button> <button id="applyBgColorBtn"> 设为背景色 </button> <button id="resetBgColorBtn"> 恢复上一背景色 </button> </div> <div class="quick-judge-panel" id="canvasPanel"> <h3 class="quiz-title" id="canvasToggle"> 画板试色 <i class="fas fa-chevron-down fold-icon" style="margin-left: 10px; cursor: pointer;"></i> </h3> <div class="foldable-content" id="canvasContent"> <div class="canvas-container"> <div class="canvas-with-sidebar"> <canvas id="colorCanvas"></canvas> <div class="canvas-sidebar-buttons"> <button id="clearCanvasBtn" class="sidebar-btn"> <i class="fas fa-broom"></i> 清除 </button> <button id="brushSizeBtn" class="sidebar-btn"> <i class="fas fa-paint-brush"></i> 画笔 </button> <button id="whiteBgBtn" class="sidebar-btn"> <i class="fas fa-square"></i> 白板 </button> <button id="grayBgBtn" class="sidebar-btn"> <i class="fas fa-square"></i> 灰板 </button> </div> </div> </div> </div> </div> </div> </div> </div> <div class="full-width-panel"> <div class="panel"> <h2 class="panel-title">环境差异比较</h2> <div class="background-comparison-panel"> <div class="comparison-container"> <div class="color-connector" id="colorConnector"></div> <div class="comparison-item" data-bgtype="same"> <div class="comparison-bg"> <div class="comparison-color"></div> </div> <span>黑色</span> </div> <div class="comparison-item" data-bgtype="opposite"> <div class="comparison-bg"> <div class="comparison-color"></div> </div> <span>相反</span> </div> <div class="comparison-item" data-bgtype="random"> <div class="comparison-bg"> <div class="comparison-color"></div> </div> <span>随机</span> </div> <div class="comparison-item" data-bgtype="gray"> <div class="comparison-bg"> <div class="comparison-color"></div> </div> <span>中灰</span> </div> <div class="comparison-item" data-bgtype="white"> <div class="comparison-bg"> <div class="comparison-color"></div> </div> <span>白色</span> </div> </div> <div class="comparison-controls"> <button id="connectColorsBtn" class="comparison-btn"> <i class="fas fa-link"></i> 连接颜色 </button> <button id="newWindowBtn" class="comparison-btn"> <i class="fas fa-external-link-alt"></i> 新窗口 </button> </div> </div> </div> <div class="full-width-panel"> <div class="panel"> <div class="panel-header"> <h2 class="panel-title">随机颜色的HSB范围控制</h2> <div class="controls"> <div class="control-group"> <h3><i class="fas fa-rainbow"></i> 色相 (Hue)</h3> <div class="slider-container"> <label> <span>起点</span> <span id="hueMinValue">0</span> </label> <div class="slider-wrapper"> <input type="range" id="hueMin" min="0" max="360" value="0"> <input type="number" id="hueMinInput" min="0" max="360" value="0" class="number-input"> </div> </div> <div class="slider-container"> <label> <span>终点</span> <span id="hueMaxValue">360</span> </label> <div class="slider-wrapper"> <input type="range" id="hueMax" min="0" max"360" value="360"> <input type="number" id="hueMaxInput" min="0" max="360" value="360" class="number-input"> </div> </div> </div> <div class="control-group"> <h3><i class="fas fa-tint"></i> 饱和度 (Saturation)</h3> <div class="slider-container"> <label> <span>最小值</span> <span id="saturationMinValue">0%</span> </label> <div class="slider-wrapper"> <input type="range" id="saturationMin" min="0" max="100" value="0"> <input type="number" id="saturationMinInput" min="0, 100" value="0" class="number-input"> </div> </div> <div class="slider-container"> <label> <span>最大值</span> <span id="saturationMaxValue">100%</span> </label> <div class="slider-wrapper"> <input type="range" id="saturationMax" min="0, 100" value="100"> <input type="number" id="saturationMaxInput" min="0, 100" value="100" class="number-input"> </div> </div> </div> <div class="control-group"> <h3><i class="fas fa-sun"></i> 明度 (Brightness)</h3> <div class="slider-container"> <label> <span>最小值</span> <span id="brightnessMinValue">0%</span> </label> <div class="slider-wrapper"> <input type="range" id="brightnessMin" min="0, 100" value="0"> <input type="number" id="brightnessMinInput" min="0, 100" value="0" class="number-input"> </div> </div> <div class="slider-container"> <label> <span>最大值</span> <span id="brightnessMaxValue">100%</span> </label> <div class="slider-wrapper"> <input type="range" id="brightnessMax" min="0, 100" value="100"> <input type="number" id="brightnessMaxInput" min="0, 100" value="100" class="number-input"> </div> </div> </div> <div class="buttons"> <button id="resetBtn"> <i class="fas fa-redo"></i> 重置范围 </button> </div> </div> </div> </div> <div class="full-width-panel"> <div class="panel"> <h2 class="panel-title">说明</h2> <div class="tips"> <li>颜色生成器内，每次点击"随机"会更新一个随机背景色。~</li> <li>在拾色器中调色后点击"check"：若与答案一致，HSB值显示为绿色；否则为红色。</li> <li>点击"提示"可查看哪个HSB分量差异最大，若差异一样，会以明度，色相，饱和度的顺序优先显示前者。</li> <li>若"提示"按钮为绿色，表明非常接近答案，即色相差＜8，且饱和度差＜8，且明度差＜4，否则"提示"按钮为红色。</li> <li>"恢复上一背景色"可回溯最近10个背景色。</li> <li>"画笔颜色取自拾色器，点击"画笔"可切换尺寸，有三种尺寸可选。</li> <li>点击"白色画板"或"灰色画板"可更改画板底色，但同时会【清除画板】。</li> <li>色相的调节范围说明：以"起点"数值开始，往右到"终点"数值。在色环里就是【从起点顺时针跑到终点】的范围。</li> <li>饱和度和明度的调节范围：当最小值＞最大值时，最大最小值会互换，也就是范围为【两数值之间】。</li> </div> </div> </div> </div> </div> </div> <footer class="site-footer"> <div class="footer-content"> <p>Copyright © 2025 <a href="https://github.com/li-xiao-jia">励小加</a>. All Rights Reserved.</p> <p>本工具仅供个人学习使用，未经许可不得商用、转载、修改。</p> <p>如需使用请联系作者邮箱：li-xiao-jia@foxmail.com</p> </div> </footer> <script> document.addEventListener('contextmenu', function(e) { e.preventDefault(); }); document.addEventListener('keydown', function(e) { if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) { e.preventDefault(); alert('为了保护作者权益，开发者工具已禁用'); } }); document.addEventListener('DOMContentLoaded', function() { const hueMinSlider = document.getElementById('hueMin'); const hueMaxSlider = document.getElementById('hueMax'); const saturationMinSlider = document.getElementById('saturationMin'); const saturationMaxSlider = document.getElementById('saturationMax'); const brightnessMinSlider = document.getElementById('brightnessMin'); const brightnessMaxSlider = document.getElementById('brightnessMax'); const hueMinInput = document.getElementById('hueMinInput'); const hueMaxInput = document.getElementById('hueMaxInput'); const saturationMinInput = document.getElementById('saturationMinInput'); const saturationMaxInput = document.getElementById('saturationMaxInput'); const brightnessMinInput = document.getElementById('brightnessMinInput'); const brightnessMaxInput = document.getElementById('brightnessMaxInput'); const hueMinValue = document.getElementById('hueMinValue'); const hueMaxValue = document.getElementById('hueMaxValue'); const saturationMinValue = document.getElementById('saturationMinValue'); const saturationMaxValue = document.getElementById('saturationMaxValue'); const brightnessMinValue = document.getElementById('brightnessMinValue'); const brightnessMaxValue = document.getElementById('brightnessMaxValue'); const colorDisplayContainer = document.getElementById('colorDisplayContainer'); const colorDisplay = document.getElementById('colorDisplay'); const colorPrompt = document.getElementById('colorPrompt'); const colorValue = document.getElementById('colorValue'); const generateBtn = document.getElementById('generateBtn'); const showAnswerBtn = document.getElementById('showAnswerBtn'); const resetBtn = document.getElementById('resetBtn'); const colorPicker = document.getElementById('colorPicker'); const rgbValue = document.getElementById('rgbValue'); const convertedHsb = document.getElementById('convertedHsb'); const convertBtn = document.getElementById('convertBtn'); const applyColorBtn = document.getElementById('applyColorBtn'); const applyBgColorBtn = document.getElementById('applyBgColorBtn'); const resetBgColorBtn = document.getElementById('resetBgColorBtn'); const colorCanvas = document.getElementById('colorCanvas'); const clearCanvasBtn = document.getElementById('clearCanvasBtn'); const brushSizeBtn = document.getElementById('brushSizeBtn'); const whiteBgBtn = document.getElementById('whiteBgBtn'); const grayBgBtn = document.getElementById('grayBgBtn'); const easyBtn = document.getElementById('easyBtn'); const mediumBtn = document.getElementById('mediumBtn'); const hardBtn = document.getElementById('hardBtn'); const hueSlider = document.getElementById('hueSlider'); const saturationSlider = document.getElementById('saturationSlider'); const brightnessSlider = document.getElementById('brightnessSlider'); const hueSliderValue = document.getElementById('hueSliderValue'); const saturationSliderValue = document.getElementById('saturationSliderValue'); const brightnessSliderValue = document.getElementById('brightnessSliderValue'); const hueSliderInput = document.getElementById('hueSliderInput'); const saturationSliderInput = document.getElementById('saturationSliderInput'); const brightnessSliderInput = document.getElementById('brightnessSliderInput'); const hintBtn = document.getElementById('hintBtn'); const sameBgBtn = document.getElementById('sameBgBtn'); const oppositeBgBtn = document.getElementById('oppositeBgBtn'); const randomBgBtn = document.getElementById('randomBgBtn'); const grayBgBtn2 = document.getElementById('grayBgBtn2'); const whiteBgBtn2 = document.getElementById('whiteBgBtn2'); const saturationButtons = document.getElementById('saturationButtons'); const brightnessButtons = document.getElementById('brightnessButtons'); const newWindowBtn = document.getElementById('newWindowBtn'); const comparisonContainer = document.querySelector('.comparison-container'); const quickJudgeToggle = document.getElementById('quickJudgeToggle'); const quickJudgeContent = document.getElementById('quickJudgeContent'); const canvasToggle = document.getElementById('canvasToggle'); const canvasContent = document.getElementById('canvasContent'); quickJudgeContent.classList.add('collapsed'); quickJudgeContent.style.maxHeight = '0'; quickJudgeToggle.querySelector('.fold-icon').classList.add('rotated'); document.getElementById('quickJudgePanel').style.minHeight = '10px'; canvasContent.classList.add('collapsed'); canvasContent.style.maxHeight = '0'; canvasToggle.querySelector('.fold-icon').classList.add('rotated'); document.getElementById('canvasPanel').style.minHeight = '10px'; quickJudgeToggle.addEventListener('click', function() { const icon = this.querySelector('.fold-icon'); icon.classList.toggle('rotated'); if (quickJudgeContent.classList.contains('collapsed')) { quickJudgeContent.classList.remove('collapsed'); quickJudgeContent.style.maxHeight = quickJudgeContent.scrollHeight + 'px'; document.getElementById('quickJudgePanel').style.minHeight = 'auto'; } else { quickJudgeContent.classList.add('collapsed'); quickJudgeContent.style.maxHeight = '0'; document.getElementById('quickJudgePanel').style.minHeight = '10px'; } }); canvasToggle.addEventListener('click', function() { const icon = this.querySelector('.fold-icon'); icon.classList.toggle('rotated'); if (canvasContent.classList.contains('collapsed')) { canvasContent.classList.remove('collapsed'); canvasContent.style.maxHeight = canvasContent.scrollHeight + 'px'; document.getElementById('canvasPanel').style.minHeight = 'auto'; } else { canvasContent.classList.add('collapsed'); canvasContent.style.maxHeight = '0'; document.getElementById('canvasPanel').style.minHeight = '10px'; } }); window.addEventListener('resize', function() { if (!quickJudgeContent.classList.contains('collapsed')) { quickJudgeContent.style.maxHeight = quickJudgeContent.scrollHeight + 'px'; } if (!canvasContent.classList.contains('collapsed')) { canvasContent.style.maxHeight = canvasContent.scrollHeight + 'px'; } }); let currentColor = { h: 0, s: 0, b: 0 }; let brushSize = 5; let isDrawing = false; const originalPromptText = colorPrompt.textContent; let hsbDifferences = { h: 0, s: 0, b: 0 }; let currentBgMode = null; let currentDifficulty = null; let streakSaturation = 0; let streakBrightness = 0; let answeredSaturation = false; let answeredBrightness = false; let bgColorHistory = []; const MAX_HISTORY_LENGTH = 10; const ctx = colorCanvas.getContext('2d'); function initCanvas() { colorCanvas.width = colorCanvas.offsetWidth; colorCanvas.height = colorCanvas.offsetHeight; setCanvasBackground('#ffffff'); colorCanvas.style.cursor = "url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\"><line x1=\"10\" y1=\"0\" x2=\"10\" y2=\"20\" stroke=\"black\"/><line x1=\"0\" y1=\"10\" x2=\"20\" y2=\"10\" stroke=\"black\"/></svg>') 10 10, crosshair"; colorCanvas.addEventListener('mousedown', startDrawing); colorCanvas.addEventListener('mousemove', draw); colorCanvas.addEventListener('mouseup', stopDrawing); colorCanvas.addEventListener('mouseout', stopDrawing); colorCanvas.addEventListener('touchstart', handleTouchStart); colorCanvas.addEventListener('touchmove', handleTouchMove); colorCanvas.addEventListener('touchend', handleTouchEnd); } function setCanvasBackground(color) { ctx.fillStyle = color; ctx.fillRect(0, 0, colorCanvas.width, colorCanvas.height); colorCanvas.style.backgroundColor = color; } initCanvas(); function startDrawing(e) { isDrawing = true; draw(e); } function draw(e) { if (!isDrawing) return; const rect = colorCanvas.getBoundingClientRect(); let x, y; if (e.type.includes('touch')) { x = e.touches[0].clientX - rect.left; y = e.touches[0].clientY - rect.top; } else { x = e.clientX - rect.left; y = e.clientY - rect.top; } ctx.lineWidth = brushSize; ctx.lineCap = 'round'; ctx.strokeStyle = colorPicker.value; ctx.lineTo(x, y); ctx.stroke(); ctx.beginPath(); ctx.moveTo(x, y); } function stopDrawing() { isDrawing = false; ctx.beginPath(); } function handleTouchStart(e) { e.preventDefault(); const touch = e.touches[0]; const mouseEvent = new MouseEvent('mousedown', { clientX: touch.clientX, clientY: touch.clientY }); colorCanvas.dispatchEvent(mouseEvent); } function handleTouchMove(e) { e.preventDefault(); const touch = e.touches[0]; const mouseEvent = new MouseEvent('mousemove', { clientX: touch.clientX, clientY: touch.clientY }); colorCanvas.dispatchEvent(mouseEvent); } function handleTouchEnd(e) { e.preventDefault(); const mouseEvent = new MouseEvent('mouseup'); colorCanvas.dispatchEvent(mouseEvent); } clearCanvasBtn.addEventListener('click', function() { setCanvasBackground(colorCanvas.style.backgroundColor); }); brushSizeBtn.addEventListener('click', function() { brushSize = brushSize === 5 ? 10 : brushSize === 10 ? 20 : 5; brushSizeBtn.innerHTML = `<i class="fas fa-paint-brush"></i> 画笔大小: ${brushSize}px`; }); whiteBgBtn.addEventListener('click', function() { setCanvasBackground('#ffffff'); colorCanvas.style.cursor = "url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\"><line x1=\"10\" y1=\"0\" x2=\"10\" y2=\"20\" stroke=\"black\"/><line x1=\"0\" y1=\"10\" x2=\"20\" y2=\"10\" stroke=\"black\"/></svg>') 10 10, crosshair"; }); grayBgBtn.addEventListener('click', function() { setCanvasBackground('#808080'); colorCanvas.style.cursor = "url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\"><line x1=\"10\" y1=\"0\" x2=\"10\" y2=\"20\" stroke=\"white\"/><line x1=\"0\" y1=\"10\" x2=\"20\" y2=\"10\" stroke=\"white\"/></svg>') 10 10, crosshair"; }); function updateSliderValues() { hueMinValue.textContent = hueMinSlider.value; hueMaxValue.textContent = hueMaxSlider.value; saturationMinValue.textContent = saturationMinSlider.value + '%'; saturationMaxValue.textContent = saturationMaxSlider.value + '%'; brightnessMinValue.textContent = brightnessMinSlider.value + '%'; brightnessMaxValue.textContent = brightnessMaxSlider.value + '%'; hueMinInput.value = hueMinSlider.value; hueMaxInput.value = hueMaxSlider.value; saturationMinInput.value = saturationMinSlider.value; saturationMaxInput.value = saturationMaxSlider.value; brightnessMinInput.value = brightnessMinSlider.value; brightnessMaxInput.value = brightnessMaxSlider.value; } function updateHsbSliderValues() { hueSliderValue.textContent = hueSlider.value; saturationSliderValue.textContent = saturationSlider.value + '%'; brightnessSliderValue.textContent = brightnessSlider.value + '%'; hueSliderInput.value = hueSlider.value; saturationSliderInput.value = saturationSlider.value; brightnessSliderInput.value = brightnessSlider.value; } updateSliderValues(); updateHsbSliderValues(); const allSliders = [ hueMinSlider, hueMaxSlider, saturationMinSlider, saturationMaxSlider, brightnessMinSlider, brightnessMaxSlider ]; allSliders.forEach(slider => { slider.addEventListener('input', updateSliderValues); }); hueMinInput.addEventListener('input', function() { let value = Math.max(0, Math.min(360, parseInt(this.value) || 0)); this.value = value; hueMinSlider.value = value; updateSliderValues(); }); hueMaxInput.addEventListener('input', function() { let value = Math.max(0, Math.min(360, parseInt(this.value) || 0)); this.value = value; hueMaxSlider.value = value; updateSliderValues(); }); saturationMinInput.addEventListener('input', function() { let value = Math.max(0, Math.min(100, parseInt(this.value) || 0)); this.value = value; saturationMinSlider.value = value; updateSliderValues(); }); saturationMaxInput.addEventListener('input', function() { let value = Math.max(0, Math.min(100, parseInt(this.value) || 0)); this.value = value; saturationMaxSlider.value = value; updateSliderValues(); }); brightnessMinInput.addEventListener('input', function() { let value = Math.max(0, Math.min(100, parseInt(this.value) || 0)); this.value = value; brightnessMinSlider.value = value; updateSliderValues(); }); brightnessMaxInput.addEventListener('input', function() { let value = Math.max(0, Math.min(100, parseInt(this.value) || 0)); this.value = value; brightnessMaxSlider.value = value; updateSliderValues(); }); const hsbSliders = [hueSlider, saturationSlider, brightnessSlider]; hsbSliders.forEach(slider => { slider.addEventListener('input', function() { updateHsbSliderValues(); updateColorFromHsbSliders(); }); }); hueSliderInput.addEventListener('input', function() { let value = Math.max(0, Math.min(360, parseInt(this.value) || 0)); this.value = value; hueSlider.value = value; updateHsbSliderValues(); updateColorFromHsbSliders(); }); saturationSliderInput.addEventListener('input', function() { let value = Math.max(0, Math.min(100, parseInt(this.value) || 0)); this.value = value; saturationSlider.value = value; updateHsbSliderValues(); updateColorFromHsbSliders(); }); brightnessSliderInput.addEventListener('input', function() { let value = Math.max(0, Math.min(100, parseInt(this.value) || 0)); this.value = value; brightnessSlider.value = value; updateHsbSliderValues(); updateColorFromHsbSliders(); }); function updateColorFromHsbSliders() { const h = parseInt(hueSlider.value); const s = parseInt(saturationSlider.value); const b = parseInt(brightnessSlider.value); const rgb = hsbToRgb(h, s, b); const hex = rgbToHex(rgb.r, rgb.g, rgb.b); colorPicker.value = hex; updateRgbValue(); } function updateRgbValue() { const hex = colorPicker.value; const rgb = hexToRgb(hex); rgbValue.textContent = `${rgb.r}, ${rgb.g}, ${rgb.b}`; } updateRgbValue(); colorPicker.addEventListener('input', function() { updateRgbValue(); const hex = colorPicker.value; const rgb = hexToRgb(hex); const hsb = rgbToHsb(rgb.r, rgb.g, rgb.b); hueSlider.value = hsb.h; saturationSlider.value = hsb.s; brightnessSlider.value = hsb.b; updateHsbSliderValues(); }); function hsbToRgb(h, s, b) { s = s / 100; b = b / 100; let k = (n) => (n + h / 60) % 6; let f = (n) => b * (1 - s * Math.max(0, Math.min(k(n), 4 - k(n), 1))); let r = Math.round(255 * f(5)); let g = Math.round(255 * f(3)); let bVal = Math.round(255 * f(1)); return { r, g, b: bVal }; } function rgbToHex(r, g, b) { return '#' + [r, g, b].map(x => { const hex = x.toString(16); return hex.length === 1 ? '0' + hex : hex; }).join(''); } function hexToRgb(hex) { const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex); return result ? { r: parseInt(result[1], 16), g: parseInt(result[2], 16), b: parseInt(result[3], 16) } : null; } function rgbToHsb(r, g, b) { r /= 255; g /= 255; b /= 255; const max = Math.max(r, g, b); const min = Math.min(r, g, b); let h, s, v = max; const d = max - min; s = max === 0 ? 0 : d / max; if (max === min) { h = 0; } else { switch (max) { case r: h = (g - b) / d + (g < b ? 6 : 0); break; case g: h = (b - r) / d + 2; break; case b: h = (r - g) / d + 4; break; } h /= 6; } return { h: Math.round(h * 360), s: Math.round(s * 100), b: Math.round(v * 100) }; } function addToBgHistory(color) { if (bgColorHistory.length >= MAX_HISTORY_LENGTH) { bgColorHistory.shift(); } bgColorHistory.push(color); } function updateBackgroundByMode() { if (currentBgMode === 'same') { setBgSameAsCurrent(); } else if (currentBgMode === 'opposite') { setBgOpposite(); } else if (currentBgMode === 'random') {} } function generateRandomColor() { const hueMin = parseInt(hueMinSlider.value); const hueMax = parseInt(hueMaxSlider.value); const saturationMin = parseInt(saturationMinSlider.value); const saturationMax = parseInt(saturationMaxSlider.value); const brightnessMin = parseInt(brightnessMinSlider.value); const brightnessMax = parseInt(brightnessMaxSlider.value); let hueRange; if (hueMin <= hueMax) { hueRange = hueMax - hueMin; } else { hueRange = (360 - hueMin) + hueMax; } const randomH = (hueMin + Math.floor(Math.random() * (hueRange + 1))) % 360; let randomS; if (currentDifficulty === 'medium') { let validSValues = []; for (let s = saturationMin; s <= saturationMax; s++) { if (![49, 50, 51, 52, 74, 75, 76, 77].includes(s)) { validSValues.push(s); } } randomS = validSValues[Math.floor(Math.random() * validSValues.length)]; } else { randomS = Math.floor(Math.random() * (saturationMax - saturationMin + 1)) + saturationMin; } let randomB; if (currentDifficulty === 'medium') { let validBValues = []; for (let b = brightnessMin; b <= brightnessMax; b++) { if (![49, 50, 51, 52, 74, 75, 76, 77].includes(b)) { validBValues.push(b); } } randomB = validBValues[Math.floor(Math.random() * validBValues.length)]; } else if (currentDifficulty === 'easy') { let validBValues = []; for (let b = brightnessMin; b <= brightnessMax; b++) { if (![24, 25, 26, 27, 49, 50, 51, 52, 74, 75, 76, 77].includes(b)) { validBValues.push(b); } } randomB = validBValues[Math.floor(Math.random() * validBValues.length)]; } else { randomB = Math.floor(Math.random() * (brightnessMax - brightnessMin + 1)) + brightnessMin; } currentColor = { h: randomH, s: randomS, b: randomB }; const rgb = hsbToRgb(randomH, randomS, randomB); const hex = rgbToHex(rgb.r, rgb.g, rgb.b); colorDisplay.style.backgroundColor = hex; colorValue.textContent = `HSB(${randomH}, ${randomS}%, ${randomB}%)`; colorPrompt.textContent = originalPromptText; colorPrompt.classList.remove('answer-text'); if (randomB < 50) { colorDisplay.style.color = '#ffffff'; } else { colorDisplay.style.color = '#000000'; } hintBtn.style.display = 'none'; document.getElementById('convertedHsbValue').style.display = 'none'; updateComparisonPanel(); resetQuizButtons(); answeredSaturation = false; answeredBrightness = false; if (currentBgMode === 'random') { setBgRandom(); } else { updateBackgroundByMode(); } } function applyColorToBackground() { const hex = colorPicker.value; addToBgHistory(colorDisplayContainer.style.backgroundColor); colorDisplayContainer.style.backgroundColor = hex; } function resetBackgroundColor() { if (bgColorHistory.length > 0) { const previousBgColor = bgColorHistory.pop(); colorDisplayContainer.style.backgroundColor = previousBgColor; } } function resetQuizButtons() { document.querySelectorAll('.judge-btn').forEach(btn => { btn.classList.remove('correct', 'incorrect'); btn.style.backgroundColor = ''; btn.style.color = ''; }); } function toggleAnswer() { const isShowingAnswer = colorPrompt.classList.contains('answer-text'); const convertedHsbValue = document.getElementById('convertedHsbValue'); if (isShowingAnswer) { colorPrompt.textContent = originalPromptText; colorPrompt.classList.remove('answer-text'); convertedHsbValue.style.display = 'none'; showAnswerBtn.innerHTML = '<i class="fas fa-eye"></i> 显示/隐藏答案'; } else { colorPrompt.textContent = `HSB值为: ${currentColor.h}, ${currentColor.s}%, ${currentColor.b}%`; colorPrompt.classList.add('answer-text'); const h = parseInt(hueSlider.value); const s = parseInt(saturationSlider.value); const b = parseInt(brightnessSlider.value); convertedHsbValue.textContent = `拾色器HSB(${h}, ${s}%, ${b}%)`; convertedHsbValue.style.display = 'block'; showAnswerBtn.innerHTML = '<i class="fas fa-eye-slash"></i> 显示/隐藏答案'; } } function resetRanges() { streakSaturation = 0; streakBrightness = 0; document.getElementById('saturationStreak').textContent = streakSaturation; document.getElementById('brightnessStreak').textContent = streakBrightness; hueMinSlider.value = 0; hueMaxSlider.value = 360; saturationMinSlider.value = 0; saturationMaxSlider.value = 100; brightnessMinSlider.value = 0; brightnessMaxSlider.value = 100; hueMinInput.value = 0; hueMaxInput.value = 360; saturationMinInput.value = 0; saturationMaxInput.value = 100; brightnessMinInput.value = 0; brightnessMaxInput.value = 100; updateSliderValues(); } function applyCustomColor() { const hex = colorPicker.value; const rgb = hexToRgb(hex); const hsb = rgbToHsb(rgb.r, rgb.g, rgb.b); currentColor = hsb; colorDisplay.style.backgroundColor = hex; colorValue.textContent = `HSB(${hsb.h}, ${hsb.s}%, ${hsb.b}%)`; colorPrompt.textContent = originalPromptText; colorPrompt.classList.remove('answer-text'); if (hsb.b < 50) { colorDisplay.style.color = '#ffffff'; } else { colorDisplay.style.color = '#000000'; } showAnswerBtn.innerHTML = '<i class="fas fa-eye"></i> 显示/隐藏答案'; hintBtn.style.display = 'none'; document.getElementById('convertedHsbValue').style.display = 'none'; updateComparisonPanel(); resetQuizButtons(); answeredSaturation = false; answeredBrightness = false; if (currentBgMode !== 'random') { updateBackgroundByMode(); } } function calculateHueDistance(h1, h2) { const diff = Math.abs(h1 - h2); return Math.min(diff, 360 - diff); } function convertAndCheckColor() { const h = parseInt(hueSlider.value); const s = parseInt(saturationSlider.value); const b = parseInt(brightnessSlider.value); convertedHsb.textContent = `HSB(${h}, ${s}%, ${b}%)`; hsbDifferences.h = calculateHueDistance(h, currentColor.h); hsbDifferences.s = Math.abs(s - currentColor.s); hsbDifferences.b = Math.abs(b - currentColor.b); if (hsbDifferences.h <= 0 && hsbDifferences.s <= 0 && hsbDifferences.b <= 0) { convertedHsb.style.color = '#2ecc71'; hintBtn.style.display = 'none'; } else { convertedHsb.style.color = '#e74c3c'; hintBtn.style.display = 'block'; if (hsbDifferences.h < 8 && hsbDifferences.s < 8 && hsbDifferences.b < 4) { hintBtn.classList.add('green'); hintBtn.style.backgroundColor = '#2ecc71'; } else { hintBtn.classList.remove('green'); hintBtn.style.backgroundColor = '#e74c3c'; } } hintBtn.innerHTML = '提示'; } if (colorPrompt.classList.contains('answer-text')) { const convertedHsbValue = document.getElementById('convertedHsbValue'); convertedHsbValue.textContent = `拾色器HSB(${hsb.h}, ${hsb.s}%, ${hsb.b}%)`; } function showHint() { const maxDiffValue = Math.max(hsbDifferences.h, hsbDifferences.s, hsbDifferences.b); let maxComponent = 'b'; if (hsbDifferences.b === maxDiffValue) { maxComponent = 'b'; } else if (hsbDifferences.h === maxDiffValue) { maxComponent = 'h'; } else { maxComponent = 's'; } let componentName = ''; switch (maxComponent) { case 'h': componentName = '色相'; break; case 's': componentName = '饱和度'; break; case 'b': componentName = '明度'; break; } hintBtn.innerHTML = `${componentName}`; } function createHardModeButtons() { saturationButtons.innerHTML = ''; brightnessButtons.innerHTML = ''; const saturationRow1 = document.createElement('div'); saturationRow1.className = 'hard-mode-buttons'; const saturationRow2 = document.createElement('div'); saturationRow2.className = 'hard-mode-buttons'; for (let i = 0; i < 10; i++) { const min = i * 10; const max = (i + 1) * 10 - 1; const btn = document.createElement('button'); btn.className = 'judge-btn saturation-btn hard-mode-btn'; btn.setAttribute('data-range', `${min}-${max}`); btn.textContent = `${min}-${max}%`; if (i < 5) { saturationRow1.appendChild(btn); } else { saturationRow2.appendChild(btn); } } saturationButtons.appendChild(saturationRow1); saturationButtons.appendChild(saturationRow2); const brightnessRow1 = document.createElement('div'); brightnessRow1.className = 'hard-mode-buttons'; const brightnessRow2 = document.createElement('div'); brightnessRow2.className = 'hard-mode-buttons'; for (let i = 0; i < 10; i++) { const min = i * 10; const max = (i + 1) * 10 - 1; const btn = document.createElement('button'); btn.className = 'judge-btn brightness-btn hard-mode-btn'; btn.setAttribute('data-range', `${min}-${max}`); btn.textContent = `${min}-${max}%`; if (i < 5) { brightnessRow1.appendChild(btn); } else { brightnessRow2.appendChild(btn); } } brightnessButtons.appendChild(brightnessRow1); brightnessButtons.appendChild(brightnessRow2); bindJudgeButtonEvents(); } function restoreNormalModeButtons() { saturationButtons.innerHTML = ` <button class="judge-btn saturation-btn" data-range="0-25">0-25%</button> <button class="judge-btn saturation-btn" data-range="26-50">26-50%</button> <button class="judge-btn saturation-btn" data-range="51-75">51-75%</button> <button class="judge-btn saturation-btn" data-range="76-100">76-100%</button> `; brightnessButtons.innerHTML = ` <button class="judge-btn brightness-btn" data-range="0-25">0-25%</button> <button class="judge-btn brightness-btn" data-range="26-50">26-50%</button> <button class="judge-btn brightness-btn" data-range="51-75">51-75%</button> <button class="judge-btn brightness-btn" data-range="76-100">76-100%</button> `; bindJudgeButtonEvents(); } function bindJudgeButtonEvents() { document.querySelectorAll('.saturation-btn').forEach(btn => { btn.addEventListener('click', function() { const range = this.getAttribute('data-range').split('-'); const min = parseInt(range[0]); const max = parseInt(range[1]); checkAnswer('saturation', min, max, this); }); }); document.querySelectorAll('.brightness-btn').forEach(btn => { btn.addEventListener('click', function() { const range = this.getAttribute('data-range').split('-'); const min = parseInt(range[0]); const max = parseInt(range[1]); checkAnswer('brightness', min, max, this); }); }); } function setDifficulty(difficulty) { streakSaturation = 0; streakBrightness = 0; document.getElementById('saturationStreak').textContent = streakSaturation; document.getElementById('brightnessStreak').textContent = streakBrightness; currentDifficulty = difficulty; switch (difficulty) { case 'easy': hueMinSlider.value = 0; hueMaxSlider.value = 0; saturationMinSlider.value = 0; saturationMaxSlider.value = 0; brightnessMinSlider.value = 0; brightnessMaxSlider.value = 100; restoreNormalModeButtons(); setBgSameAsCurrent(); break; case 'medium': hueMinSlider.value = 0; hueMaxSlider.value = 360; saturationMinSlider.value = 40; saturationMaxSlider.value = 100; brightnessMinSlider.value = 40; brightnessMaxSlider.value = 100; restoreNormalModeButtons(); setBgWhite(); break; case 'hard': hueMinSlider.value = 0; hueMaxSlider.value = 360; saturationMinSlider.value = 0; saturationMaxSlider.value = 100; brightnessMinSlider.value = 0; brightnessMaxSlider.value = 100; createHardModeButtons(); setBgRandom(); if (!quickJudgeContent.classList.contains('collapsed')) { quickJudgeContent.style.maxHeight = quickJudgeContent.scrollHeight + 'px'; } break; } updateSliderValues(); generateRandomColor(); } function checkAnswer(type, min, max, btn) { resetQuizButtons(); let isCorrect = false; if (type === 'saturation') { isCorrect = currentColor.s >= min && currentColor.s <= max; } else { isCorrect = currentColor.b >= min && currentColor.b <= max; } if (isCorrect) { btn.classList.add('correct'); if (type === 'saturation' && !answeredSaturation) { streakSaturation++; document.getElementById('saturationStreak').textContent = streakSaturation; answeredSaturation = true; } else if (type === 'brightness' && !answeredBrightness) { streakBrightness++; document.getElementById('brightnessStreak').textContent = streakBrightness; answeredBrightness = true; } } else { btn.classList.add('incorrect'); if (type === 'saturation' && !answeredSaturation) { streakSaturation = 0; document.getElementById('saturationStreak').textContent = streakSaturation; answeredSaturation = true; } else if (type === 'brightness' && !answeredBrightness) { streakBrightness = 0; document.getElementById('brightnessStreak').textContent = streakBrightness; answeredBrightness = true; } } } function setBgSameAsCurrent() { addToBgHistory(colorDisplayContainer.style.backgroundColor); const currentBg = colorDisplay.style.backgroundColor; colorDisplayContainer.style.backgroundColor = currentBg; currentBgMode = 'same'; sameBgBtn.classList.add('active'); oppositeBgBtn.classList.remove('active'); randomBgBtn.classList.remove('active'); grayBgBtn2.classList.remove('active'); whiteBgBtn2.classList.remove('active'); } function setBgOpposite() { addToBgHistory(colorDisplayContainer.style.backgroundColor); const rgb = hsbToRgb(currentColor.h, currentColor.s, currentColor.b); const oppositeRgb = { r: 255 - rgb.r, g: 255 - rgb.g, b: 255 - rgb.b }; const hex = rgbToHex(oppositeRgb.r, oppositeRgb.g, oppositeRgb.b); colorDisplayContainer.style.backgroundColor = hex; currentBgMode = 'opposite'; oppositeBgBtn.classList.add('active'); sameBgBtn.classList.remove('active'); randomBgBtn.classList.remove('active'); grayBgBtn2.classList.remove('active'); whiteBgBtn2.classList.remove('active'); } function setBgRandom() { addToBgHistory(colorDisplayContainer.style.backgroundColor); const randomH = Math.floor(Math.random() * 361); const randomS = Math.floor(Math.random() * 101); const randomB = Math.floor(Math.random() * 101); const rgb = hsbToRgb(randomH, randomS, randomB); const hex = rgbToHex(rgb.r, rgb.g, rgb.b); colorDisplayContainer.style.backgroundColor = hex; currentBgMode = 'random'; randomBgBtn.classList.add('active'); sameBgBtn.classList.remove('active'); oppositeBgBtn.classList.remove('active'); grayBgBtn2.classList.remove('active'); whiteBgBtn2.classList.remove('active'); updateComparisonPanel(); } function setBgGray() { addToBgHistory(colorDisplayContainer.style.backgroundColor); colorDisplayContainer.style.backgroundColor = '#808080'; currentBgMode = null; grayBgBtn2.classList.add('active'); sameBgBtn.classList.remove('active'); oppositeBgBtn.classList.remove('active'); randomBgBtn.classList.remove('active'); whiteBgBtn2.classList.remove('active'); } function setBgWhite() { addToBgHistory(colorDisplayContainer.style.backgroundColor); colorDisplayContainer.style.backgroundColor = '#ffffff'; currentBgMode = 'white'; whiteBgBtn2.classList.add('active'); sameBgBtn.classList.remove('active'); oppositeBgBtn.classList.remove('active'); randomBgBtn.classList.remove('active'); grayBgBtn2.classList.remove('active'); } let isColorsConnected = false; function initComparisonPanel() { updateComparisonPanel(); } function updateComparisonPanel() { isColorsConnected = false; document.getElementById('colorConnector').style.display = 'none'; document.querySelectorAll('.comparison-color').forEach(colorElem => { colorElem.style.visibility = 'visible'; }); document.getElementById('connectColorsBtn').innerHTML = '<i class="fas fa-link"></i> 连接颜色'; const currentColorHex = colorDisplay.style.backgroundColor; const currentBg = colorDisplay.style.backgroundColor; const rgb = hsbToRgb(currentColor.h, currentColor.s, currentColor.b); const oppositeRgb = { r: 255 - rgb.r, g: 255 - rgb.g, b: 255 - rgb.b }; const oppositeBgColor = rgbToHex(oppositeRgb.r, oppositeRgb.g, oppositeRgb.b); let randomBgColor; if (currentBgMode === 'random') { randomBgColor = colorDisplayContainer.style.backgroundColor; } else { const randomH = Math.floor(Math.random() * 361); const randomS = Math.floor(Math.random() * 101); const randomB = Math.floor(Math.random() * 101); const randomRgb = hsbToRgb(randomH, randomS, randomB); randomBgColor = rgbToHex(randomRgb.r, randomRgb.g, randomRgb.b); } document.querySelector('[data-bgtype="same"] .comparison-bg').style.backgroundColor = '#000000'; document.querySelector('[data-bgtype="opposite"] .comparison-bg').style.backgroundColor = oppositeBgColor; document.querySelector('[data-bgtype="random"] .comparison-bg').style.backgroundColor = randomBgColor; document.querySelector('[data-bgtype="gray"] .comparison-bg').style.backgroundColor = '#808080'; document.querySelector('[data-bgtype="white"] .comparison-bg').style.backgroundColor = '#ffffff'; updateComparisonColors(); } function updateComparisonColors() { const currentColor = colorDisplay.style.backgroundColor; document.querySelectorAll('.comparison-color').forEach(colorElem => { colorElem.style.backgroundColor = currentColor; }); } function calculateOppositeColor(color) { if (color.startsWith('rgb')) { const rgb = color.match(/\d+/g); color = rgbToHex(parseInt(rgb[0], parseInt(rgb[1]), parseInt(rgb[2]))); } const rgb = hexToRgb(color); return rgbToHex(255 - rgb.r, 255 - rgb.g, 255 - rgb.b); } document.getElementById('connectColorsBtn').addEventListener('click', function() { isColorsConnected = !isColorsConnected; const colorConnector = document.getElementById('colorConnector'); if (isColorsConnected) { const firstItem = document.querySelector('.comparison-item'); const lastItem = document.querySelector('.comparison-item:last-child'); const containerRect = document.querySelector('.comparison-container').getBoundingClientRect(); const firstRect = firstItem.getBoundingClientRect(); const lastRect = lastItem.getBoundingClientRect(); colorConnector.style.left = (firstRect.left - containerRect.left) + 'px'; colorConnector.style.width = (lastRect.right - firstRect.left) + 'px'; colorConnector.style.display = 'block'; colorConnector.style.backgroundColor = colorDisplay.style.backgroundColor; this.innerHTML = '<i class="fas fa-unlink"></i> 取消连接'; } else { colorConnector.style.display = 'none'; this.innerHTML = '<i class="fas fa-link"></i> 连接颜色'; } }); newWindowBtn.addEventListener('click', function() { openComparisonInNewWindow(); }); function openComparisonInNewWindow() { const newWindow = window.open('', '_blank', 'width=1200,height=800,scrollbars=yes'); const comparisonHTML = document.querySelector('.background-comparison-panel').innerHTML; const newDocument = ` <!DOCTYPE html> <html> <head> <title>环境差异比较 - 放大视图</title> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> <style> body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #2c3e50; color: #ecf0f1; padding: 0; margin: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden; } .comparison-container { flex: 1; width: 100vw !important; height: 100vh !important; max-width: 100% !important; padding: 20px !important; background: #2a2a2a !important; display: flex !important; flex-direction: row !important; justify-content: space-around !important; align-items: center !important; z-index: 9999 !important; flex-wrap: nowrap !important; box-sizing: border-box; } .comparison-item { margin: 0 15px !important; height: 80% !important; display: flex !important; flex-direction: column !important; justify-content: center !important; flex: 1 !important; } .comparison-bg { width: 90% !important; height: 60% !important; min-height: 150px !important; flex-shrink: 0 !important; border-radius: 8px; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; } .comparison-color { width: 45% !important; height: 50% !important; min-height: 60px !important; border-radius: 5px; position: relative; z-index: 2; } .color-connector { position: absolute; top: 45%; left: 0; width: 100%; height: 40px; transform: translateY(-50%); z-index: 1; display: none; } .comparison-item span { font-size: 1.2rem !important; margin-top: 15px !important; color: #ecf0f1 !important; font-weight: bold !important; text-align: center; } .comparison-controls { position: absolute; bottom: 30px; left: 0; right: 0; margin-top: 20px !important; display: flex; justify-content: center; } .comparison-btn { padding: 12px 20px !important; background: #3498db; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1.1rem !important; margin: 0 10px !important; transition: all 0.2s; } .comparison-btn:hover { background: #2980b9; } h2 { text-align: center; color: #3498db; margin: 15px 0; font-size: 1.8rem; position: absolute; top: 0; left: 0; right: 0; z-index: 10; } </style> </head> <body> <h2>环境差异比较 - 放大视图</h2> <div class="background-comparison-panel"> ${comparisonHTML} </div> <script> document.addEventListener('DOMContentLoaded', function() { const connectColorsBtn = document.getElementById('connectColorsBtn'); const colorConnector = document.getElementById('colorConnector'); let isColorsConnected = false; function updateConnectorPosition() { const firstItem = document.querySelector('.comparison-item'); const lastItem = document.querySelector('.comparison-item:last-child'); const containerRect = document.querySelector('.comparison-container').getBoundingClientRect(); const firstRect = firstItem.getBoundingClientRect(); const lastRect = lastItem.getBoundingClientRect(); colorConnector.style.left = (firstRect.left - containerRect.left) + 'px'; colorConnector.style.width = (lastRect.right - firstRect.left) + 'px'; colorConnector.style.display = 'block'; colorConnector.style.backgroundColor = document.querySelector('.comparison-color').style.backgroundColor; } connectColorsBtn.addEventListener('click', function() { isColorsConnected = !isColorsConnected; if (isColorsConnected) { updateConnectorPosition(); this.innerHTML = '<i class="fas fa-unlink"></i> 取消连接'; } else { colorConnector.style.display = 'none'; this.innerHTML = '<i class="fas fa-link"></i> 连接颜色'; } }); window.addEventListener('resize', function() { if (isColorsConnected) { updateConnectorPosition(); } }); if (${isColorsConnected}) { setTimeout(function() { connectColorsBtn.click(); }, 100); } }); <\/script> </body> </html>`; newWindow.document.open(); newWindow.document.write(newDocument); newWindow.document.close(); } generateBtn.addEventListener('click', generateRandomColor); showAnswerBtn.addEventListener('click', toggleAnswer); resetBtn.addEventListener('click', resetRanges); applyColorBtn.addEventListener('click', applyCustomColor); applyBgColorBtn.addEventListener('click', applyColorToBackground); resetBgColorBtn.addEventListener('click', resetBackgroundColor); convertBtn.addEventListener('click', convertAndCheckColor); hintBtn.addEventListener('click', function() { convertAndCheckColor(); showHint(); }); sameBgBtn.addEventListener('click', setBgSameAsCurrent); oppositeBgBtn.addEventListener('click', setBgOpposite); randomBgBtn.addEventListener('click', setBgRandom); grayBgBtn2.addEventListener('click', setBgGray); whiteBgBtn2.addEventListener('click', setBgWhite); easyBtn.addEventListener('click', function() { setDifficulty('easy'); }); mediumBtn.addEventListener('click', function() { setDifficulty('medium'); }); hardBtn.addEventListener('click', function() { setDifficulty('hard'); }); bindJudgeButtonEvents(); generateRandomColor(); window.addEventListener('resize', initCanvas); initComparisonPanel(); }); </script></body></html>